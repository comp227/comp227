{"componentChunkName":"component---src-templates-content-template-js","path":"/part2/adding_styles_to_react_app","result":{"data":{"markdownRemark":{"html":"<div class=\"content\">\n<p>The appearance of our current Tasks application is quite modest.\nIn <a href=\"/part0/fundamentals_of_web_apps#exercises-0-1-0-6\">exercise 0.2</a>,\nthe assignment was to go through Mozilla's <a href=\"https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/CSS_basics\">CSS tutorial</a>.</p>\n<p>Let's take a look at how we can add styles to a React application.\nThere are several different ways of doing this and we will take a look at the other methods later on.\nFirst, we will add CSS to our application the old-school way; in a single file without using a\n<a href=\"https://developer.mozilla.org/en-US/docs/Glossary/CSS_preprocessor\">CSS preprocessor</a>\n(although this is not entirely true as we will learn later on).</p>\n<p>Let's add a new <em>index.css</em> file under the <em>src</em> directory and then add it to the application by importing it in the <em>main.jsx</em> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token string\">'./index.css'</span></code></pre></div>\n<p>Let's add the following CSS rule to the <em>index.css</em> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">h1</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> chocolate<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p><strong>Pertinent:</strong> when the content of the file <em>index.css</em> changes,\nReact might not notice that automatically, so you may need to refresh the browser to see your changes!</p>\n</blockquote>\n<p>CSS rules comprise of <strong>selectors</strong> and <strong>declarations</strong>.\nThe selector defines which elements the rule should be applied to.\nThe selector above is <code class=\"language-text\">h1</code>, which will match <em>all of the <code class=\"language-text\">h1</code> header tags in our application</em>.</p>\n<p>The declaration sets the <code class=\"language-text\">color</code> property to the value <code class=\"language-text\">chocolate</code>.</p>\n<blockquote>\n<p>üç´? <em>all this work is making me hungry!</em> üòã</p>\n</blockquote>\n<p><strong><em>One CSS rule can contain an arbitrary number of declarations</em></strong>.\nLet's modify the previous rule to make the text cursive, by defining the font style as <code class=\"language-text\">italic</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">h1</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> chocolate<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token property\">font-style</span><span class=\"token punctuation\">:</span> italic<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p><strong>FYI:</strong> Make sure you continue trying to type out the parts (instead of copying) and use <strong><em>Tab</em></strong> to help WebStorm autocomplete the syntax for you.</p>\n</blockquote>\n<p>There are many ways of matching elements by using <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors\">different types of CSS selectors</a>.</p>\n<p>If we wanted to target, let's say, each one of the tasks with our styles,\nwe could use the selector <code class=\"language-text\">li</code>, as all of the tasks are wrapped inside <code class=\"language-text\">li</code> tags:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Task</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> task<span class=\"token punctuation\">,</span> toggleImportance <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> label <span class=\"token operator\">=</span> task<span class=\"token punctuation\">.</span>important \n    <span class=\"token operator\">?</span> <span class=\"token string\">'make not important'</span> \n    <span class=\"token operator\">:</span> <span class=\"token string\">'make important'</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>li<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>task<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">}</span> \n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>toggleImportance<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>label<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Let's add the following rule at the end of our stylesheet (relying on my non-existent knowledge of color theory and design):</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">li</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #f4b223<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding-top</span><span class=\"token punctuation\">:</span> 8px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 18px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Using element types for defining CSS rules is slightly problematic.\nIf our application contained other <code class=\"language-text\">li</code> tags, the same style rule would also be applied to them.</p>\n<p>If we want to apply our style specifically to tasks,\nthen it is better to use <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Class_selectors\"><strong>class selectors</strong></a>.</p>\n<p>In regular HTML, classes are defined as the value of the <code class=\"language-text\">class</code> attribute:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>task<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>some text...<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>In React we have to use the <a href=\"https://react.dev/learn#adding-styles\"><code class=\"language-text\">className</code> attribute</a> instead of the <em><code class=\"language-text\">class</code></em> attribute.\nWith this in mind, let's make the following changes to our <code class=\"language-text\">Task</code> component:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Task</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> task<span class=\"token punctuation\">,</span> toggleImportance <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> label <span class=\"token operator\">=</span> task<span class=\"token punctuation\">.</span>important \n    <span class=\"token operator\">?</span> <span class=\"token string\">'make not important'</span> \n    <span class=\"token operator\">:</span> <span class=\"token string\">'make important'</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token operator\">&lt;</span>li className<span class=\"token operator\">=</span><span class=\"token string\">'task'</span><span class=\"token operator\">></span></span>      <span class=\"token punctuation\">{</span>task<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">}</span> \n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>toggleImportance<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>label<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Class selectors are then defined instead with the <code class=\"language-text\">.className</code> syntax (replacing our <code class=\"language-text\">li</code> syntax):</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.task</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #f4b223<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding-top</span><span class=\"token punctuation\">:</span> 8px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 18px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Notice this time that instead of a named color, I used a <a href=\"https://www.w3schools.com/colors/colors_hexadecimal.asp\"><strong>hex color value</strong></a> to specify a color in the RGB space.\nIf you now add other non-task <code class=\"language-text\">li</code> elements to the application, they will not be affected by the style rule above.</p>\n<p>One final selector that we are going to use is called a <strong>pseudo-class selector</strong>,\nwhich is not an actual class, but something that is defined by most browsers.\nIn our case, since we've been doing a lot websites with dark mode, we'll jump on the bandwagon and add this to <em>index.css</em>:</p>\n<p>:root {\ncolor-scheme:dark;\n}</p>\n<p>Once you save, you'll immediately notice that the entire page has inverted, including the colors for button controls and textboxes.\nYou can apply this to any of the future assignments if you prefer all things dark.</p>\n<h3>Improved error message</h3>\n<p>We previously implemented the error message that was displayed when the user tried to toggle the importance of a deleted task with the <code class=\"language-text\">alert</code> method.\nLet's implement the error message as its own React component, in <em>components/Notification.jsx</em>.</p>\n<p>The component is quite simple:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Notification</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> message <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"error\"</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Notification</code></pre></div>\n<p>If the value of the <code class=\"language-text\">message</code> prop is <code class=\"language-text\">null</code>, then nothing is rendered to the screen,\nand in other cases, the message gets rendered inside of a div element.</p>\n<p>Let's add a new piece of state called <code class=\"language-text\">errorMessage</code> to the <code class=\"language-text\">App</code> component.\nLet's initialize it with some error message so that we can immediately test our component:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> Task <span class=\"token keyword\">from</span> <span class=\"token string\">'./components/Task'</span>\n<span class=\"token keyword\">import</span> taskService <span class=\"token keyword\">from</span> <span class=\"token string\">'./services/tasks'</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> Notification <span class=\"token keyword\">from</span> <span class=\"token string\">'./components/Notification'</span></span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>tasks<span class=\"token punctuation\">,</span> setTasks<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> \n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>newTask<span class=\"token punctuation\">,</span> setNewTask<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showAll<span class=\"token punctuation\">,</span> setShowAll<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>errorMessage<span class=\"token punctuation\">,</span> setErrorMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'some error happened...'</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Tasks<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>Notification message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>errorMessage<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setShowAll</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>showAll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          show <span class=\"token punctuation\">{</span>showAll <span class=\"token operator\">?</span> <span class=\"token string\">'important'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'all'</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>      \n      <span class=\"token comment\">// ...</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then let's add a style rule that suits an error message:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.error</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #9c2b2e<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 22px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-style</span><span class=\"token punctuation\">:</span> solid<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-width</span><span class=\"token punctuation\">:</span> 1px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 5px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>By this point you should now be able to see a styled Error Message appear on the webpage with no errors in the console.\nOnce you can verify this, we can add the logic for displaying the error message.\nLet's change the <code class=\"language-text\">toggleImportanceOf</code> function in the following way:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">toggleImportanceOf</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> task <span class=\"token operator\">=</span> tasks<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span> <span class=\"token operator\">=></span> t<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> id<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> changedTask <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>task<span class=\"token punctuation\">,</span> important<span class=\"token operator\">:</span> <span class=\"token operator\">!</span>task<span class=\"token punctuation\">.</span>important <span class=\"token punctuation\">}</span>\n\n    taskService\n      <span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> changedTask<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">returnedTask</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setTasks</span><span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">task</span> <span class=\"token operator\">=></span> task<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> id <span class=\"token operator\">?</span> task <span class=\"token operator\">:</span> returnedTask<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">setErrorMessage</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Task '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>task<span class=\"token punctuation\">.</span>content<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' was already deleted from server</span><span class=\"token template-punctuation string\">`</span></span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token function\">setErrorMessage</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span></span>        <span class=\"token function\">setTasks</span><span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span> <span class=\"token operator\">=></span> t<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>When the error occurs we add a descriptive error message to the <code class=\"language-text\">errorMessage</code> state.\nAt the same time, we start a timer, that will set the <code class=\"language-text\">errorMessage</code> state to <code class=\"language-text\">null</code> after five seconds.</p>\n<p>The result looks like this:</p>\n<picture><img src=\"/static/3a697916a9a21833e178f7bf4c31fc44/5a190/26e.png\" alt=\"error removed from server screenshot from app\" srcset=\"/static/3a697916a9a21833e178f7bf4c31fc44/772e8/26e.png 200w,\n/static/3a697916a9a21833e178f7bf4c31fc44/e17e5/26e.png 400w,\n/static/3a697916a9a21833e178f7bf4c31fc44/5a190/26e.png 800w,\n/static/3a697916a9a21833e178f7bf4c31fc44/c1b63/26e.png 1200w,\n/static/3a697916a9a21833e178f7bf4c31fc44/07a9c/26e.png 1440w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>The code for the current state of our application can be found in the  <em>part2-7</em> branch on <a href=\"https://github.com/comp227/part2-tasks/tree/part2-7\">GitHub</a>.</p>\n<h3>Inline styles</h3>\n<p>React also makes it possible to write styles directly in the code as so-called <a href=\"https://react-cn.github.io/react/tips/inline-styles.html\">inline styles</a>.</p>\n<p>The idea behind defining inline styles is extremely simple.\nAny React component or element can be provided with a set of CSS properties as a JavaScript object through the\n<a href=\"https://react.dev/reference/react-dom/components/common#applying-css-styles\">style</a> attribute.</p>\n<p><strong><em>CSS rules follow a different format/case convention in JavaScript compared to normal CSS</em></strong>.\nLet's say that we wanted to give some element the color green and italic font.\nIn CSS, it would look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> green<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-style</span><span class=\"token punctuation\">:</span> italic<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>But as a React inline-style object it would look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  color<span class=\"token operator\">:</span> <span class=\"token string\">'green'</span><span class=\"token punctuation\">,</span>\n  fontStyle<span class=\"token operator\">:</span> <span class=\"token string\">'italic'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Every CSS property is defined as a separate property of the JavaScript object.\nNumeric values for pixels can be simply defined as integers.\nOne of the major differences compared to regular CSS, is that hyphenated (<em>kebab-case</em>) CSS properties are written in <em>camelCase</em>.</p>\n<p>Let's add a footer component, <code class=\"language-text\">Footer</code>, to our application and define inline styles for it.\nThe component is defined in the file <em>components/Footer.jsx</em> and used in the file <em>App.jsx</em> as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Footer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> footerStyle <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    marginTop<span class=\"token operator\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span>\n    paddingBottom<span class=\"token operator\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span>\n    color<span class=\"token operator\">:</span> <span class=\"token string\">'orange'</span><span class=\"token punctuation\">,</span>\n    fontStyle<span class=\"token operator\">:</span> <span class=\"token string\">'italic'</span><span class=\"token punctuation\">,</span>\n    fontSize<span class=\"token operator\">:</span> <span class=\"token number\">16</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>footerStyle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>\n      Task app<span class=\"token punctuation\">,</span> Department <span class=\"token keyword\">of</span> Computer Science<span class=\"token punctuation\">,</span> University <span class=\"token keyword\">of</span> the Pacific\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Footer</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> Footer <span class=\"token keyword\">from</span> <span class=\"token string\">'./components/Footer'</span></span><span class=\"token keyword\">import</span> Task <span class=\"token keyword\">from</span> <span class=\"token string\">'./components/Task'</span>\n<span class=\"token keyword\">import</span> Notification <span class=\"token keyword\">from</span> <span class=\"token string\">'./components/Notification'</span>\n<span class=\"token keyword\">import</span> taskService <span class=\"token keyword\">from</span> <span class=\"token string\">'./services/tasks'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Tasks<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span>Notification message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>errorMessage<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n      <span class=\"token comment\">// ...</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>Footer <span class=\"token operator\">/</span><span class=\"token operator\">></span></span>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Inline styles come with certain limitations.\nFor instance, so-called <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes\">pseudo-classes</a> can't be used straightforwardly.</p>\n<p>Inline styles and some of the other ways of adding styles to React components go completely against the grain of old conventions.\nTraditionally, it has been considered <em>best practice to entirely separate CSS from the content (HTML) and functionality (JavaScript)</em>.\nAccording to this older school of thought, the goal was to write CSS, HTML, and JavaScript into their separate files.</p>\n<p><strong><em>The philosophy of React is, in fact, the polar opposite of this</em></strong>.\nSince the separation of CSS, HTML, and JavaScript into separate files did not seem to scale well in larger applications,\nReact bases the division of the application along the lines of its logical functional entities.</p>\n<p>The structural units that make up the application's functional entities are React components.\nA React component defines the HTML for structuring the content,\nthe JavaScript functions for determining functionality, and also the component's styling; all in one place.\nThis is to create individual components that are as independent and reusable as possible.</p>\n<p>The code of the final version of our application can be found in the <em>part2-8</em> branch on <a href=\"https://github.com/comp227/part2-tasks/tree/part2-8\">GitHub</a>.</p>\n</div>\n<div class=\"tasks\">\n<h3>Exercises 2.16-2.17</h3>\n<h4>2.16: Communities, Step 11</h4>\n<p>Use the <a href=\"/part2/adding_styles_to_react_app#improved-error-message\">improved error message</a>\nexample from part 2 as a guide to show a notification that lasts for a few seconds after a successful operation is executed (a group is added or a number is changed).\nIn these examples, use the gray and green colors.</p>\n<picture><img src=\"/static/fced7a7ab57a952a67cb293a98e22569/bc962/27e.png\" alt=\"successful green added screenshot\" srcset=\"/static/fced7a7ab57a952a67cb293a98e22569/772e8/27e.png 200w,\n/static/fced7a7ab57a952a67cb293a98e22569/e17e5/27e.png 400w,\n/static/fced7a7ab57a952a67cb293a98e22569/bc962/27e.png 617w\" sizes=\"(max-width: 617px) 100vw, 617px\"></picture>\n<h4>2.17*: Communities, Step 12</h4>\n<p>Open your application in two browsers.\n<strong>If you delete a group in browser A</strong> a short while before attempting to <strong><em>change the group's URL</em></strong> in browser B, you will get the following error message:</p>\n<picture><img src=\"/static/ba0e30d3fef85a3554eafa5674022ea8/5a190/29b.png\" alt=\"error message 404 not found when changing multiple browsers\" srcset=\"/static/ba0e30d3fef85a3554eafa5674022ea8/772e8/29b.png 200w,\n/static/ba0e30d3fef85a3554eafa5674022ea8/e17e5/29b.png 400w,\n/static/ba0e30d3fef85a3554eafa5674022ea8/5a190/29b.png 800w,\n/static/ba0e30d3fef85a3554eafa5674022ea8/82b28/29b.png 931w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Fix the issue according to the example shown in <a href=\"/part2/altering_data_in_server#promises-and-errors\">promise and errors</a> in part 2.\nModify the example so that the user is shown a message when the operation does not succeed.\nThe messages shown for successful and unsuccessful events should look different:</p>\n<picture><img src=\"/static/b3562a45e667120b6cfa230215dcf209/76cea/28e.png\" alt=\"error message shown on screen instead of in console feature add-on\" srcset=\"/static/b3562a45e667120b6cfa230215dcf209/772e8/28e.png 200w,\n/static/b3562a45e667120b6cfa230215dcf209/e17e5/28e.png 400w,\n/static/b3562a45e667120b6cfa230215dcf209/76cea/28e.png 799w\" sizes=\"(max-width: 799px) 100vw, 799px\"></picture>\n<blockquote>\n<p><strong>Notice</strong> that even if you handle the exception, the first <strong><em>404</em></strong> error message is still printed to the console.\nBut you should not see <em><code class=\"language-text\">&quot;Uncaught (in promise) Error&quot;</code></em>.</p>\n</blockquote>\n</div>\n<div class=\"content\">\n<h3>Couple of important remarks</h3>\n<p>At the end of this part, there are a few more challenging exercises.\nAt this stage, you can skip the exercises if they are too much of a headache,\nwe will come back to the same themes again later.\nYou should still read through this material below.</p>\n<p>Know that we have done one thing in our app that is masking away a very typical source of errors:\n<strong><em>We set the state <code class=\"language-text\">tasks</code> to have an initial value of an empty array.</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>tasks<span class=\"token punctuation\">,</span> setTasks<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This is a reasonable initial value for <code class=\"language-text\">tasks</code> since we will be storing multiple tasks in that state.</p>\n<p>If the state *were only saving <strong>one thing*</strong>,\nit would be better to initialize that state to <code class=\"language-text\">null</code> since it indicates that there is <em>nothing</em> initially.\nLet's see what happens if we initialize our state to <code class=\"language-text\">null</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>tasks<span class=\"token punctuation\">,</span> setTasks<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The app breaks down.</p>\n<picture><img src=\"/static/3d5dce190cf8494a6d4fc2ee32a1b505/5a190/31a.png\" alt=\"error showing uncaught type error when reading map\" srcset=\"/static/3d5dce190cf8494a6d4fc2ee32a1b505/772e8/31a.png 200w,\n/static/3d5dce190cf8494a6d4fc2ee32a1b505/e17e5/31a.png 400w,\n/static/3d5dce190cf8494a6d4fc2ee32a1b505/5a190/31a.png 800w,\n/static/3d5dce190cf8494a6d4fc2ee32a1b505/20c85/31a.png 999w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>The error message gives the reason and location for the error.\nThe code that caused the problems is the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token comment\">// tasksToShow gets the value of tasks</span>\n  <span class=\"token keyword\">const</span> tasksToShow <span class=\"token operator\">=</span> showAll\n    <span class=\"token operator\">?</span> tasks\n    <span class=\"token operator\">:</span> tasks<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">task</span> <span class=\"token operator\">=></span> task<span class=\"token punctuation\">.</span>important<span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// ...</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">{</span>tasksToShow<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">task</span> <span class=\"token operator\">=></span></span>    <span class=\"token operator\">&lt;</span>Task key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>task<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span> task<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>task<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>The error message is</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Cannot <span class=\"token builtin class-name\">read</span> properties of null <span class=\"token punctuation\">(</span>reading <span class=\"token string\">'map'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>The variable <code class=\"language-text\">tasksToShow</code> is first assigned the value of the state <code class=\"language-text\">tasks</code>.\nThen, the code tries to call the method <code class=\"language-text\">map</code> to a non-existing object, that is, to <code class=\"language-text\">null</code>.</p>\n<p>What is the reason for that?</p>\n<p>The effect hook uses the function <code class=\"language-text\">setTasks</code> to set the <code class=\"language-text\">tasks</code> that the backend is returning:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    taskService\n      <span class=\"token punctuation\">.</span><span class=\"token function\">getAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initialTasks</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">setTasks</span><span class=\"token punctuation\">(</span>initialTasks<span class=\"token punctuation\">)</span></span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>However, the problem is that <strong>the effect is executed only <em>after the first render</em></strong>.\nAnd because <code class=\"language-text\">tasks</code> has the initial value of <code class=\"language-text\">null</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>tasks<span class=\"token punctuation\">,</span> setTasks<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token comment\">// ...</span></code></pre></div>\n<p>on the first render, the following code gets executed:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">tasksToShow <span class=\"token operator\">=</span> tasks <span class=\"token comment\">// has the value null</span>\n\n<span class=\"token comment\">// ...</span>\n\ntasksToShow<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">task</span> <span class=\"token operator\">=></span> <span class=\"token operator\">...</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// uh-oh...</span></code></pre></div>\n<p>and this blows up the app since <em>we can not call the method <code class=\"language-text\">map</code> on the value <code class=\"language-text\">null</code></em>.</p>\n<p>When we initialize <code class=\"language-text\">tasks</code> to an empty array,\nthere is no error since we can call <code class=\"language-text\">map</code> on an empty array.</p>\n<p>So, the initialization of the state <em>masked</em> the problem\nthat is caused by the data not yet being fetched from the backend.</p>\n<p>Another way to circumvent the problem is to use <strong>conditional rendering</strong>\nand return <code class=\"language-text\">null</code> if the component state is not properly initialized:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>tasks<span class=\"token punctuation\">,</span> setTasks<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></span>  <span class=\"token comment\">// ... </span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    taskService\n      <span class=\"token punctuation\">.</span><span class=\"token function\">getAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initialTasks</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setTasks</span><span class=\"token punctuation\">(</span>initialTasks<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// do not render anything if tasks is still null</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tasks<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> </span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span> </span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span> </code></pre></div>\n<p>So on the first render, nothing is rendered.\nWhen the tasks arrive from the backend,\nthe effect used the function <code class=\"language-text\">setTasks</code> to set the value of the state <code class=\"language-text\">tasks</code>.\nThis causes the component to be rendered again,\nand at the second render, the tasks get rendered to the screen.</p>\n<p><strong><em>This conditional rendering is suitable in cases where it is impossible to define the state so that the initial rendering is possible.</em></strong></p>\n<p>The other thing that we still need to have a closer look at is <code class=\"language-text\">useEffect</code>'s second parameter:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    taskService\n      <span class=\"token punctuation\">.</span><span class=\"token function\">getAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initialTasks</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setTasks</span><span class=\"token punctuation\">(</span>initialTasks<span class=\"token punctuation\">)</span>  \n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span></code></pre></div>\n<p><code class=\"language-text\">useEffect</code>'s second parameter specifies <a href=\"https://react.dev/reference/react/useEffect#parameters\">how often the effect is run</a>.\nThe principle is that the effect is always executed after the first render of the component\n<em>and</em> when the value of the second parameter changes.</p>\n<p>If the second parameter is an empty array <code class=\"language-text\">[]</code>, <em>its content never changes</em>\nand <strong>the effect is only run after the first render of the component</strong>.\n<em>This is what we want when we initialize the app state from the server.</em></p>\n<p>However, there are situations where we want to perform the effect at other times,\ne.g. when the state of the component changes in a particular way.</p>\n<p>Consider the following simple application for querying currency exchange rates from the <a href=\"https://www.exchangerate-api.com/\">Exchange rate API</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">,</span> setValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>rates<span class=\"token punctuation\">,</span> setRates<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>currency<span class=\"token punctuation\">,</span> setCurrency<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'effect run, currency is now'</span><span class=\"token punctuation\">,</span> currency<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// skip if currency is not defined</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currency<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fetching exchange rates...'</span><span class=\"token punctuation\">)</span>\n      axios\n        <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://open.er-api.com/v6/latest/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>currency<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">setRates</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>rates<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>currency<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSearch</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">setCurrency</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>form onSubmit<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onSearch<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n        currency<span class=\"token operator\">:</span> <span class=\"token operator\">&lt;</span>input value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span> onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleChange<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button type<span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span><span class=\"token operator\">></span>exchange rate<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>pre<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>rates<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>pre<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<p>The user interface of the application has a form,\nin the input field of which the name of the desired currency is written.\nIf the currency exists, the application renders the exchange rates of the currency to other currencies:</p>\n<picture><img src=\"/static/51328ed50ebbd3d428c00c0e16b14470/5a190/32new.png\" alt=\"browser showing exchange rate for eur against other currencies and developer tools opn\" srcset=\"/static/51328ed50ebbd3d428c00c0e16b14470/772e8/32new.png 200w,\n/static/51328ed50ebbd3d428c00c0e16b14470/e17e5/32new.png 400w,\n/static/51328ed50ebbd3d428c00c0e16b14470/5a190/32new.png 800w,\n/static/51328ed50ebbd3d428c00c0e16b14470/798d4/32new.png 976w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>The application sets the name of the currency entered into the form to the state <code class=\"language-text\">currency</code> at the moment the button is pressed.</p>\n<p>When the <code class=\"language-text\">currency</code> gets a new value, the application fetches its exchange rates from the API in the effect function:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>currency<span class=\"token punctuation\">,</span> setCurrency<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'effect run, currency is now'</span><span class=\"token punctuation\">,</span> currency<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// skip if currency is not defined</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currency<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fetching exchange rates...'</span><span class=\"token punctuation\">)</span>\n      axios\n        <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://open.er-api.com/v6/latest/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>currency<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">setRates</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>rates<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>currency<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span>  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The useEffect hook has now <code class=\"language-text\">currency</code> as the second parameter.\nThe effect function is therefore executed after the first render,\nand <em>always</em> after the table as its second parameter <code class=\"language-text\">currency</code> changes.\nThat is, <strong><em>when the state <code class=\"language-text\">currency</code> gets a new value, the content of the table changes and the effect function is executed</em></strong>.</p>\n<p>It is natural to choose <code class=\"language-text\">null</code> as the initial value for the variable <code class=\"language-text\">currency</code>, because <code class=\"language-text\">currency</code> represents a single item.\nThe initial value <code class=\"language-text\">null</code> indicates that there is nothing in the state yet, and it is also easy to check with an <code class=\"language-text\">if</code> statement whether a value has been assigned to the variable.\nThe effect has the following condition:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currency<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n  <span class=\"token comment\">// get exchange rates</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>which prevents requesting the exchange rates just after the first render when the variable <code class=\"language-text\">currency</code> still has the initial value, i.e. a <code class=\"language-text\">null</code> value.</p>\n<p>So if the user types <em><code class=\"language-text\">eur</code></em> in the search field,\nthe application uses Axios to perform an <strong>HTTP GET</strong> request to the address <a href=\"https://open.er-api.com/v6/latest/eur\">https://open.er-api.com/v6/latest/eur</a>\nand stores the response in the <code class=\"language-text\">rates</code> state.</p>\n<p>When the user then enters another value in the search field, e.g. <em><code class=\"language-text\">usd</code></em>,\nthe effect function is executed again and <em>the exchange rates of the new currency are requested form the API</em>.</p>\n<p>The way presented here for making API requests might seem a bit awkward.\nThis particular application could have been made without <code class=\"language-text\">useEffect</code>,\nby making the API requests directly in the form's submit handler function:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSearch</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    axios\n      <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://open.er-api.com/v6/latest/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>value<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setRates</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>rates<span class=\"token punctuation\">)</span> <span class=\"token comment\">// ‚ò£Ô∏è</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>However, there are situations where that technique would not work.\nFor example, you <em>might</em> encounter one such a situation in the exercise 2.20 where the use of <code class=\"language-text\">useEffect</code> could provide a solution.\nNotice that this depends on the approach you selected.</p>\n</div>\n<div class=\"tasks\">\n<h3>Exercises 2.18-2.20</h3>\n<h4>2.18*: Data for countries, Step 1</h4>\n<p>The API <a href=\"https://restcountries.com\">https://restcountries.com</a> provides data for different countries in a machine-readable format, a so-called REST API.</p>\n<p>Create an application, in which one can look at data from various countries.\nThe application should probably get the data from the endpoint <a href=\"https://restcountries.com/v3.1/all\">all</a>.</p>\n<p><strong>NOTICE</strong> make sure again that you are careful to call <code class=\"language-text\">vite</code> in your base directory when you make your new application, which you can call <em>countries</em>.</p>\n<p>The user interface is very simple.\nThe country to be shown is found by typing a search query into the search field.</p>\n<p>If there are too many (over 10) countries that match the query, then the user is prompted to make their query more specific:</p>\n<picture><img src=\"/static/a68398d5e5b4b9777242d2fbb534698f/5a190/19b1.png\" alt=\"too many matches screenshot\" srcset=\"/static/a68398d5e5b4b9777242d2fbb534698f/772e8/19b1.png 200w,\n/static/a68398d5e5b4b9777242d2fbb534698f/e17e5/19b1.png 400w,\n/static/a68398d5e5b4b9777242d2fbb534698f/5a190/19b1.png 800w,\n/static/a68398d5e5b4b9777242d2fbb534698f/5b587/19b1.png 1010w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>If there are ten or fewer countries, but more than one, then all countries matching the query are shown:</p>\n<picture><img src=\"/static/e4b9ff20e00c91d482fa985316052ffa/5a190/19b2.png\" alt=\"matching countries in a list screenshot\" srcset=\"/static/e4b9ff20e00c91d482fa985316052ffa/772e8/19b2.png 200w,\n/static/e4b9ff20e00c91d482fa985316052ffa/e17e5/19b2.png 400w,\n/static/e4b9ff20e00c91d482fa985316052ffa/5a190/19b2.png 800w,\n/static/e4b9ff20e00c91d482fa985316052ffa/73b94/19b2.png 1004w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>When there is only one country matching the query, then the basic data of the country (e.g. capital and area),\nits flag and the languages spoken are shown:</p>\n<picture><img src=\"/static/13c12fee8401337a23d3a4aec56efe43/c8e86/19b3.png\" alt=\"flag and additional attributes screenshot\" srcset=\"/static/13c12fee8401337a23d3a4aec56efe43/772e8/19b3.png 200w,\n/static/13c12fee8401337a23d3a4aec56efe43/e17e5/19b3.png 400w,\n/static/13c12fee8401337a23d3a4aec56efe43/c8e86/19b3.png 758w\" sizes=\"(max-width: 758px) 100vw, 758px\"></picture>\n<blockquote>\n<p><strong>Pertinent</strong>: It is enough that your application works for most countries.\nSome countries, like <strong><em>Sudan</em></strong>, can be hard to support since the name of the country is part of the name of another country, <strong><em>South Sudan</em></strong>.\nYou don't need to worry about these edge cases.</p>\n</blockquote>\n<h4>2.19*: Data for countries, Step 2</h4>\n<p><strong>There is still a lot to do in this part, so don't get stuck on this exercise!</strong></p>\n<p>Improve on the application in the previous exercise,\nsuch that when the names of multiple countries are shown on the page there is a button next to the name of the country,\nwhich when pressed shows the view for that country:</p>\n<picture><img src=\"/static/299ee559c0a78979b307ec1d80c2f812/5a190/19b4.png\" alt=\"attach show buttons for each country feature\" srcset=\"/static/299ee559c0a78979b307ec1d80c2f812/772e8/19b4.png 200w,\n/static/299ee559c0a78979b307ec1d80c2f812/e17e5/19b4.png 400w,\n/static/299ee559c0a78979b307ec1d80c2f812/5a190/19b4.png 800w,\n/static/299ee559c0a78979b307ec1d80c2f812/6bfd0/19b4.png 1011w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>In this exercise, it is also enough that your application works for most countries.\nCountries whose name appears in the name of another country, like <strong><em>Sudan</em></strong>, can be ignored.</p>\n<h4>2.20*: Data for countries, Step 3</h4>\n<p><strong>There is still a lot to do in this part, so don't get stuck on this exercise!</strong></p>\n<p>Add to the view showing the data of a single country, the weather report for the capital of that country.\nThere are dozens of providers for weather data.\nOne suggested API is <a href=\"https://openweathermap.org\">https://openweathermap.org</a>.\nNotice that it might take some minutes until a generated API key is valid.</p>\n<picture><img src=\"/static/33287ce44b7f72900961630d4c8eef30/f7616/19x.png\" alt=\"weather report added feature\" srcset=\"/static/33287ce44b7f72900961630d4c8eef30/772e8/19x.png 200w,\n/static/33287ce44b7f72900961630d4c8eef30/e17e5/19x.png 400w,\n/static/33287ce44b7f72900961630d4c8eef30/f7616/19x.png 766w\" sizes=\"(max-width: 766px) 100vw, 766px\"></picture>\n<p>If you use Open weather map, here is the description for <a href=\"https://openweathermap.org/weather-conditions#Icon-list\">how to get weather icons</a>.</p>\n<blockquote>\n<p><strong>Pertinent:</strong> In some browsers (such as Firefox) the chosen API might send an error response,\nwhich indicates that HTTPS encryption is not supported, although the request URL starts with <code class=\"language-text\">http://</code>.\nThis issue can be fixed by completing the exercise using Chrome.</p>\n</blockquote>\n<p><em>You will need an api-key to use almost every weather service.</em>\n<strong>Do not save the api-key to source control!</strong> Nor hardcode the api-key to your source code.\nInstead use an <a href=\"https://vitejs.dev/guide/env-and-mode.html\">environment variable</a> to save keys.\nIn real-life applications, it's considered insecure sending these keys directly from the browser, <em>as anyone who can open the dev console would be able to intercept your keys</em>!\nWe will focus on implementing a separate backend in the next part of the course.</p>\n<p>Assuming the api-key is <code class=\"language-text\">t0p53cr3t4p1k3yv4lu3</code>, when the application is started like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">VITE_SOME_KEY</span><span class=\"token operator\">=</span>t0p53cr3t4p1k3yv4lu3 <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">npm</span> run dev // For Linux/macOS Bash\n<span class=\"token punctuation\">(</span><span class=\"token variable\">$env</span>:VITE_SOME_KEY<span class=\"token operator\">=</span><span class=\"token string\">\"t0p53cr3t4p1k3yv4lu3\"</span><span class=\"token punctuation\">)</span> -and <span class=\"token punctuation\">(</span>npm run dev<span class=\"token punctuation\">)</span> // For Windows PowerShell\n<span class=\"token builtin class-name\">set</span> <span class=\"token string\">\"VITE_SOME_KEY=t0p53cr3t4p1k3yv4lu3\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">npm</span> run dev // For Windows cmd.exe</code></pre></div>\n<p>you can access the value of the key from the <code class=\"language-text\">import.meta.env</code> object:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> api_key <span class=\"token operator\">=</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">VITE_SOME_KEY</span>\n<span class=\"token comment\">// variable api_key has now the value set in startup</span></code></pre></div>\n<p>The other alternative is to delete the <em>.env</em> file that we had <a href=\"/part2/getting_data_from_server#axios-and-promises\">mentioned before</a>\nand then make sure that you have <strong>added <em>.env</em> file in your <em>.gitignore</em></strong>.</p>\n<p>To completely remove the .env file from being re-added or tracked by github, run these commands from terminal in the directory where your .env file is.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">rm</span> --cached .env\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"Removed .env from the repo\"</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\".env\"</span> <span class=\"token operator\">>></span> .gitignore\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> .gitignore\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"added .env to gitignore\"</span></code></pre></div>\n<p>You can see how this process looks by looking at the commit history of the <a href=\"https://github.com/comp227/part2-tasks/tree/part2-8\"><em>part2-8</em> branch</a>,\nwhich now has the <em>.env</em> file removed from the latest snapshot of the repo and git will no longer track any changes to the file.</p>\n<blockquote>\n<p><strong>Pertinent:</strong> The <em>.env</em> file can still be seen in older commits, so <strong>make sure you do not add the any keys before ignoring the file first!</strong></p>\n</blockquote>\n<p>Now you can use the <code class=\"language-text\">.env</code> file rather than defining it on the command line each time by adding the following to it.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#¬†.env\n\nREACT_APP_API_KEY=t0p53cr3t4p1k3yv4lu3</code></pre></div>\n<p>Either way, you will need to restart the server to apply the changes.</p>\n<blockquote>\n<p><strong>FYI:</strong> To prevent accidentally leaking environment variables to the client, only variables prefixed with <code class=\"language-text\">VITE_</code> are exposed to Vite.</p>\n</blockquote>\n</div>","frontmatter":{"mainImage":{"publicURL":"/static/8869c2e065a6ae187c633a378e6fa6be/part-2.svg"},"part":2,"letter":"e","lang":"en"}}},"pageContext":{"part":2,"letter":"e","lang":"en"}}}